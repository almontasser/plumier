# AppVeyor file
# http://www.appveyor.com/docs/appveyor-yml

# Build version format
version: "{build}"

# Test against this version of Node.js
environment:
  NODE_ENV: test

  matrix:
    - nodejs_version: "stable"
    - nodejs_version: "8"

build: off

services:
  - mongodb

branches:
  only:
  - master

install:
  - ps: Install-Product node $env:nodejs_version
  - npm install -g yarn
  - yarn install

init:
  - git config --global core.autocrlf true

test_script:
  - node --version && npm --version && yarn --version
  - ps: "npm --version # PowerShell" # Pass comment to PS for easier debugging
  - cmd: npm run test